Графическая библиотека
======================

Функции для работы с графическим состоянием
-------------------------------------------

:gsave:  Сохранение состояния
:grestore: Восстановление состояния
:set-colour colour: Установка цвета

Афинные преобразования
----------------------

:id-matrix: Текущая матрица трансформации становится единичной
:mul-matrix a b c d tx ty: Произведение текущей матрицы трансформации на матрицу a b c d tx ty
:translate p: Перемещение в точку p
:scale p: Масштабирование на основе вектора p
:rotate a: Поворот на угол a в градусах

Функции для работы с контуром
-----------------------------

:new-path: Начать новый контур
:move-to p: Переместить текущую точку в контуре в точку p
:line-to p: Добавить прямую линию от текущей точки до точки p
:cubic-bezier p1 p2 p3: Добавление в контур кубической кривой Безье
:close-path: Закрыть текущий контур
:clip-rect p size: Обрезка по прямоугольному контуру 


Функции рисования
-----------------

:stroke-path: Обвести текущий контур
:fill-path: Заполнить контур текущим цветом
:rectangle p size: Рисование прямоугольника, p - левый верхний угол, size - размеры прямоугольника
:fill-rect p size: Рисование заполненного прямоугольника, p - левый верхний угол, size - размеры прямоугольника
:draw-image image: Рисование изображения 

Функции для работы с текстом
----------------------------

:setfont font size: Активировать выбранный шрифт и размер
:move-to p: Переместить текущую точку для начала текста
:show-text: Вывести текст в текущей позиции
:set-colour c: Установить цвет текста

Функции нижнего уровня
----------------------

:init-screen w h: Инициализация экрана с разрешением w на h
:clear-screen: Очистка экрана
:draw-screen: Отобразить графику из внутреннего буфера
:send-text-buffer buf x y w h: Отправляет часть экрана в буфер текстовой видеопамяти
			       буфер, координаты x,y копируемой области, ширина и высота копируемой области 

Работа с двухмерными векторами
------------------------------

:make-vec2 x y: Создать двумерный вектор
:vec2-x v: Получить x координату вектора
:vec2-y v: Получить y координату вектора
:vec2-add v1 v2: Сложить два вектора
:vec2-scale v s: Умножить вектор на скаляр

Работа с изображениями
----------------------

:make-image matrix: Создать изображение с матрицей пикселей.
		    Первое измерение - строки, второе - столбцы.
:image-width i: Получить ширину изображения
:image-height i: Получить высоту изображения
:image-row i row: Получить строку пикселей с номером row изображения

Вычисление области экрана, которую нужно перерисовать
-----------------------------------------------------

:screen-reset: Сбрасывает координаты области перерисовки
:screen-add-rect ul size: Добавить область, которую нужно перерисовать
			  ul - координаты левого верхнего угла области
			  size - вектор - ширина и высота области
:screen-get-draw-ul: Получить координаты левого верхнего угла перерисовываемой области
:screen-get-draw-size: Получить вектор размера перерисовываемой области
